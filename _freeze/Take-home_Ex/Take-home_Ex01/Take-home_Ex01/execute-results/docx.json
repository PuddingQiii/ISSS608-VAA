{
  "hash": "9a6cc016b3af363fc265c2bbd51b222f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-Home Exercise 1: Data Visualisation on Singapore’s Demographics (2024)\"\nauthor: \"Wang Anqi\"\nformat: docx\nexecute:\n  warning: false\n  freeze: true\n---\n\n\n\n# **1.1 Overview**\n\nThis take-home exercise involves designing insightful data visualisations based on demographic data for Singapore in 2024. The goal is to explore and communicate the **demographic structures and distribution** through effective graphical representations.\n\n## **1.1.1 The data**\n\nAll visualisations will be based on the dataset titled\\\n\n**\"Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2024\"**,\\\n\nprovided by the [Department of Statistics, Singapore (DOS)](https://www.singstat.gov.sg/).\n\n![](images/1.1.png)\n\n# **1.2 Getting started**\n\n## **1.2.1 Installing and loading the required libraries**\n\nIn this exercise, beside tidyverse, four R packages will be used. They are:\n\n-   tidyverse: a collection of core packages designed for data science, used extensively for data preparation and wrangling.\n\n-   ggrepel: an R package provides geoms for ggplot2 to repel overlapping text labels.\n\n-   ggthemes: an R package provides some extra themes, geoms, and scales for ‘ggplot2’.\n\n-   hrbrthemes: an R package provides typography-centric themes and theme components for ggplot2.\n\n-   patchwork: an R package for preparing composite figure created using ggplot2.\n\nCode chunk below will be used to check if these packages have been installed and also will load them onto working R environment.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, ggrepel, patchwork, \n               ggthemes, hrbrthemes,) \n```\n:::\n\n\n\n## **1.2.2 Importing data**\n\nFor the purpose of this exercise, a data file called *Exam_data* will be used. It consists of year end examination grades of a cohort of primary 3 students from a local school. It is in csv file format.\n\nThe code chunk below imports *exam_data.csv* into R environment by using [*read_csv()*](https://readr.tidyverse.org/reference/read_delim.html) function of [**readr**](https://readr.tidyverse.org/) package. **readr** is one of the tidyverse package.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npopu_data <- read_csv(\"data/respopagesex2024.csv\", show_col_types = FALSE)\n\ncat(\"Total number of records in the dataset:\", nrow(popu_data), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTotal number of records in the dataset: 60424 \n```\n\n\n:::\n:::\n\n\n\n# **1.3 Data Wrangling**\n\n## 1.3.1 **Variable Selection**\n\nAccording to the dataset documentation, The meaning of each column in the dataset is as follows:\n\n-   **PA**：Planning Area\n\n<!-- -->\n\n-   **SZ**：Subzone\n\n<!-- -->\n\n-   **Age**：Single Year of Age\n\n<!-- -->\n\n-   **Sex**：Sex\n\n<!-- -->\n\n-   **Pop**：Resident Count\n\n<!-- -->\n\n-   **Time**：Time / Period\n\nSince all data points were collected in the year 2024 and the `Time` column does not provide additional analytical value for this task, it will be removed from the dataset to simplify the analysis.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Remove the 'Time' column from the dataset\npopu_data1 <- popu_data %>% select(-Time)\n```\n:::\n\n\n\n## 1.3.2 **Handling missing values**\n\nBefore conducting the analysis, we need to check for missing values. Later on, when we recode the age groups, if there are NAs in the columns, they may affect the recoding process\n\n`is.na()` allows us to identify missing values in our dataset and `sum()` counts the frequency of such missing values.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Checks for NA in each column\ncolSums(is.na(popu_data1))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n PA  SZ Age Sex Pop \n  0   0   0   0   0 \n```\n\n\n:::\n:::\n\n\n\nThe result indicates that **there are no missing values in any of the columns** (PA, SZ, Age, Sex, Pop); each column has 0 missing values, confirming that the dataset is complete.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Here's what the dataset looks like so far\npopu_data1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 60,424 × 5\n   PA         SZ                     Age   Sex       Pop\n   <chr>      <chr>                  <chr> <chr>   <dbl>\n 1 Ang Mo Kio Ang Mo Kio Town Centre 0     Males      10\n 2 Ang Mo Kio Ang Mo Kio Town Centre 0     Females    10\n 3 Ang Mo Kio Ang Mo Kio Town Centre 1     Males      10\n 4 Ang Mo Kio Ang Mo Kio Town Centre 1     Females    10\n 5 Ang Mo Kio Ang Mo Kio Town Centre 2     Males      10\n 6 Ang Mo Kio Ang Mo Kio Town Centre 2     Females    10\n 7 Ang Mo Kio Ang Mo Kio Town Centre 3     Males      10\n 8 Ang Mo Kio Ang Mo Kio Town Centre 3     Females    10\n 9 Ang Mo Kio Ang Mo Kio Town Centre 4     Males      30\n10 Ang Mo Kio Ang Mo Kio Town Centre 4     Females    10\n# ℹ 60,414 more rows\n```\n\n\n:::\n:::\n\n\n\n## **1.3.3 Data Recoding and Type Conversion**\n\nAs shown in the output above, the `Age` column is currently stored as a character type (`<chr>`), rather than as an integer (`<int>`). This prevents numerical operations and proper plotting of age-related trends. Therefore, it is necessary to convert the `Age` variable to an integer format to enable meaningful quantitative analysis.\n\nBut the dataset contains a special age value `\"90 and over\"` which cannot be directly converted to a numeric format. To maintain consistency and enable numerical analysis, this value was recoded to `90`, representing the lower bound of the age group.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 1: Recode \"90 and over\" to \"90\"\npopu_data1 <- popu_data1 %>%\n  mutate(Age = ifelse(Age == \"90 and over\", \"90\", Age))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 2: Convert Age to integer\npopu_data1 <- popu_data1 %>%\n  mutate(\n    Age = trimws(Age),\n    Age = ifelse(Age == \"90 and over\", \"90\", Age),\n    Age = as.integer(Age)\n  )\n```\n:::\n\n\n\n## **1.3.4 Standardizing Labels**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npopu_data1 <- popu_data1 %>%\n  mutate(\n    Sex = recode(Sex, \"Males\" = \"Male\", \"Females\" = \"Female\")\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Here's what the dataset looks like so far\npopu_data1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 60,424 × 5\n   PA         SZ                       Age Sex      Pop\n   <chr>      <chr>                  <int> <chr>  <dbl>\n 1 Ang Mo Kio Ang Mo Kio Town Centre     0 Male      10\n 2 Ang Mo Kio Ang Mo Kio Town Centre     0 Female    10\n 3 Ang Mo Kio Ang Mo Kio Town Centre     1 Male      10\n 4 Ang Mo Kio Ang Mo Kio Town Centre     1 Female    10\n 5 Ang Mo Kio Ang Mo Kio Town Centre     2 Male      10\n 6 Ang Mo Kio Ang Mo Kio Town Centre     2 Female    10\n 7 Ang Mo Kio Ang Mo Kio Town Centre     3 Male      10\n 8 Ang Mo Kio Ang Mo Kio Town Centre     3 Female    10\n 9 Ang Mo Kio Ang Mo Kio Town Centre     4 Male      30\n10 Ang Mo Kio Ang Mo Kio Town Centre     4 Female    10\n# ℹ 60,414 more rows\n```\n\n\n:::\n:::\n\n\n\nNotes:\n\n1)  For June 2024, Planning Areas refer to areas demarcated in the Urban Redevelopment Authority's Master Plan 2019.\n2)  Data from 2003 onwards exclude residents who have been away from Singapore for a continuous period of 12 months or longer as at the reference period.\n3)  The figures have been rounded to the nearest 10.\n4)  The data may not add up due to rounding.\n\n# **1.4 Exploratory Data Analysis**\n\n## **1.4.1 Population Pyramid by Age and Sex**\n\n::: panel-tabset\n## The plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-docx/unnamed-chunk-10-1.png)\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# construct population pyramid data (set male values as negative).\npyramid_data <- popu_data1 %>%\n  mutate(Pop = ifelse(Sex == \"Male\", -Pop, Pop))\n\n# define color\ngender_colors <- c(\"Male\" = \"#9ecae1\", \"Female\" = \"#fbb4b9\")\n\n# plot\nggplot(pyramid_data, aes(x = Age, y = Pop, fill = Sex)) +\n  geom_bar(stat = \"identity\", width = 0.9) +\n  coord_flip() +\n  scale_y_continuous(labels = abs) +\n  scale_x_continuous(breaks = seq(0, 90, by = 5)) +\n  scale_fill_manual(values = gender_colors) +\n  labs(\n    title = \"Population Pyramid of Singapore Residents (2024)\",\n    subtitle = \"Distribution by Age and Gender\",\n    x = \"Age\",\n    y = \"Population\",\n    fill = \"Gender\"\n  ) +\n  theme_minimal(base_size = 14) +\n  theme(\n    plot.title = element_text(face = \"bold\", size = 16),\n    plot.subtitle = element_text(size = 13, margin = margin(b = 10)),\n    legend.position = \"bottom\",\n    panel.grid.minor = element_blank()\n  )\n```\n:::\n\n\n:::\n\nThe population pyramid shows the age and gender distribution of Singapore residents in 2024. Males are represented on the left and females on the right.\n\nThe pyramid has a wide middle, especially between ages 25 to 39, indicating a strong working-age population. The base is relatively narrow, suggesting lower birth rates in recent years. At older ages, especially 75 and above, the female population exceeds that of males, reflecting higher life expectancy for women. Overall, the shape of the pyramid reveals an ageing population with fewer young residents, which may have implications for future labour supply and social support needs.\n\n## **1.4.2 Top 10 Planning Areas by Population**\n\n::: panel-tabset\n## The plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-docx/unnamed-chunk-12-1.png)\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Summarise total population by Planning Area (PA)\ntop_pa <- popu_data1 %>%\n  group_by(PA) %>%\n  summarise(Total = sum(Pop)) %>%\n  arrange(desc(Total)) %>%\n  slice_head(n = 10)\n\n# Plot\nlibrary(scales)\n\nggplot(top_pa, aes(x = reorder(PA, Total), y = Total)) +\n  geom_col(fill = \"#4682b4\") +\n  coord_flip() +\n  scale_y_continuous(labels = comma) +\n  labs(\n    title = \"Top 10 Planning Areas by Population (2024)\",\n    x = \"Planning Area\",\n    y = \"Total Population\"\n  ) +\n  theme_minimal(base_size = 13)\n```\n:::\n\n\n:::\n\nThe bar chart displays the top 10 planning areas in Singapore by total population in 2024. Tampines ranks first, followed closely by Bedok and Sengkang. These areas are known for their large residential zones and well-developed public amenities. Most of the top-ranked areas are located in the eastern and northern parts of Singapore, reflecting urban decentralisation and population growth in regional centres. The population sizes of these areas are relatively close, each exceeding 150,000 residents.\n\n## **1.4.3 Working and Non-working Age Population in Top 10 Planning Areas**\n\n::: panel-tabset\n## The plot\n\n\n\n::: {.cell fig-hight='14'}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-docx/unnamed-chunk-14-1.png)\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop10_pa <- popu_data1 %>%\n  count(PA, wt = Pop) %>%\n  top_n(10, n) %>%\n  pull(PA)\n# group and summarize the population by labour force status\nage_grouped <- popu_data1 %>%\n  filter(PA %in% top10_pa) %>%\n  mutate(\n    AgeGroup = case_when(\n      Age >= 25 & Age <= 64 ~ \"Working-age\",\n      TRUE ~ \"Non-working-age\"\n    )\n  ) %>%\n  group_by(PA, AgeGroup) %>%\n  summarise(Total = sum(Pop), .groups = \"drop\")\n\n# plot\nggplot(age_grouped, aes(x = reorder(PA, -Total), y = Total, fill = AgeGroup)) +\n  geom_col(color = \"black\", alpha = 0.9) +\n  scale_fill_manual(values = c(\"Working-age\" = \"#3182bd\", \"Non-working-age\" = \"#fdae6b\")) +\n  scale_y_continuous(labels = comma) + \n  labs(\n    title = \"Working and Non-working Age Population in Top 10 Planning Areas (2024)\",\n    x = \"Planning Area\",\n    y = \"Population\",\n    fill = \"Age Group\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    axis.text.x = element_text(angle = 30, hjust = 1),\n    plot.title = element_text(face = \"bold\", size = 15)\n  )\n```\n:::\n\n\n:::\n\nThis stacked bar chart shows the distribution of working-age (25–64) and non-working-age (0–24 and 65+) populations across the top 10 most populous planning areas in Singapore (2024). Working-age individuals consistently make up the majority in every area, with Tampines, Sengkang, and Woodlands having particularly high counts. Interestingly, Bedok and Jurong West, despite their large populations, have a relatively higher share of non-working-age residents—likely due to an older population base. In contrast, newer towns like Punggol and Sengkang have a larger proportion of working-age adults, reflecting younger and growing communities.\n",
    "supporting": [
      "Take-home_Ex01_files\\figure-docx"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}